{"componentChunkName":"component---src-pages-search-jsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"nodes":[{"excerpt":"Velog 사용 중 깔끔한 디자인에 이끌려  템플릿으로 개인 블로그를 구축하기로 결정하였다.\n하지만 해당 Starter는 Gatsby v4를 기반으로 구성되어 있어, 최신 Node.js 런타임 환경에서 OpenSSL 호환성 문제 및 Dependency 충돌이 발생하였다. 해당 Starter는 최근 활발한 유지 관리가 이루어지고 있지 않아, 최신 런타임 환…","fields":{"slug":"/gatsby-setup-troubleshooting/"},"frontmatter":{"date":"February 04, 2026","title":"Gatsby v4 블로그 구축 및 배포 트러블슈팅","tags":["Gatsby","Troubleshooting"]},"rawMarkdownBody":"\r\nVelog 사용 중 깔끔한 디자인에 이끌려 `gatsby-starter-hoodie` 템플릿으로 개인 블로그를 구축하기로 결정하였다.\r\n하지만 해당 Starter는 **Gatsby v4**를 기반으로 구성되어 있어, 최신 Node.js 런타임 환경에서 **OpenSSL 호환성 문제 및 Dependency 충돌**이 발생하였다.\r\n\r\n해당 Starter는 최근 활발한 유지 관리가 이루어지고 있지 않아, 최신 런타임 환경과의 호환성 문제가 발생할 수 있다.\r\n\r\n본 포스팅에서는 Gatsby v4 기반 블로그를 구축하며 마주친 문제들과 이를 해결하기 위해 적용한 **런타임 격리, 의존성 정리, GitHub Pages 배포 전략**을 정리한다.\r\n\r\n---\r\n\r\n## Node.js 런타임 환경 구성 및 버전 격리\r\n\r\nGatsby v4 엔진은 **Node.js v14 환경에서 안정적으로 동작**하는 것으로 알려져 있다.\r\n시스템 전역 Node.js 환경과의 충돌을 방지하고, 프로젝트 단위로 독립적인 실행 환경을 구성하기 위해 **nvm-windows**를 사용하였다.\r\n\r\n\r\n\r\n---\r\n\r\n## NVM 설치 중 발생한 Runtime Panic (Windows)\r\n\r\n초기 환경 구성 시 `nvm install 14.21.3` 명령어를 통해 자동 설치를 시도하였다.\r\n그러나 `npm-install.exe` 실행 단계에서 바이너리 로드에 실패하며, 아래와 같은 **Runtime Panic(메모리 참조 오류)** 이 발생하였다.\r\n\r\n> 본 이슈는 **Windows 환경에서 nvm-windows 사용 시** 확인되었다.\r\n\r\n~~~text\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal 0xc0000005 code=0x0 addr=0x0 pc=0x49800b]\r\n~~~\r\n\r\n자동 설치 스크립트 내부에서 사용하는 바이너리가 정상적으로 초기화되지 못한 것으로 판단하였다.\r\n\r\n---\r\n\r\n## Manual Setup을 통한 Node.js 환경 고정\r\n\r\n자동화 스크립트의 불안정성을 우회하기 위해, Node.js 바이너리를 직접 배치하는 **수동 설치 방식**을 채택하였다.\r\n\r\n1. **바이너리 확보**\r\n   Node.js 공식 아카이브에서 `v14.21.3` Windows 바이너리를 직접 다운로드한다.\r\n\r\n2. **디렉토리 매핑**\r\n   `nvm` Root 경로 하위에 `v14.21.3` 디렉토리를 생성한 뒤, 다운로드한 바이너리를 수동으로 복사한다.\r\n\r\n3. **런타임 활성화**\r\n   터미널을 재실행한 후 다음 명령어로 Node.js 버전을 고정한다.\r\n\r\n~~~bash\r\nnvm use 14.21.3\r\n~~~\r\n\r\n이 방식으로 Runtime Panic 없이 Gatsby 개발 서버를 정상적으로 실행할 수 있었다.\r\n\r\n---\r\n\r\n## 의존성 충돌 및 Peer Dependency 해결\r\n\r\nNode.js 런타임 문제를 해결한 이후에도, Gatsby v4와 일부 플러그인 간 **Peer Dependency 불일치**로 인해 `ERESOLVE` 에러가 발생하며 빌드가 중단되었다.\r\n\r\n\r\n\r\n---\r\n\r\n## 의존성 트리 재구성 전략\r\n\r\n기존 설치 부산물이 충돌을 유발할 가능성이 높다고 판단하여, 의존성 트리를 **완전히 초기화한 뒤 강제로 재구성**하였다.\r\n\r\n~~~bash\r\n# Artifacts Cleanup\r\nRemove-Item -Path .\\node_modules -Recurse -Force\r\nRemove-Item -Path .\\package-lock.json -Force\r\n\r\n# Atomic Installation\r\nnpm install gatsby@4 react@17 react-dom@17 --save-exact --legacy-peer-deps\r\n~~~\r\n\r\n- `--legacy-peer-deps`\r\n  Peer Dependency 검사를 완화하여 Gatsby v4 기준 의존성 조합을 강제로 유지한다.\r\n- `--save-exact`\r\n  패치 버전 업데이트로 인한 예기치 않은 충돌을 방지한다.\r\n\r\n이를 통해 개발 및 빌드 환경을 안정화하였다.\r\n\r\n---\r\n\r\n## GitHub Pages 배포 아키텍처 구성\r\n\r\nGitHub Pages는 사용자 도메인이 아닌 경우 **서브 디렉토리 기반 호스팅 구조**를 사용한다.\r\n본 프로젝트는 `/hzeror` 경로를 기준으로 서비스되므로, 정적 자산 경로 오류를 방지하기 위한 **Path Prefix 설정**이 필요했다.\r\n\r\n\r\n\r\n---\r\n\r\n## pathPrefix 및 배포 스크립트 설정\r\n\r\n빌드 시 `--prefix-paths` 옵션을 적용하지 않으면 CSS 및 이미지 자산이 정상적으로 로드되지 않는다.\r\n이를 방지하기 위해 다음과 같이 설정하였다.\r\n\r\n**gatsby-config.js**\r\n\r\n~~~javascript\r\nmodule.exports = {\r\n  pathPrefix: \"/hzeror\",\r\n}\r\n~~~\r\n\r\n**package.json**\r\n\r\n~~~json\r\n{\r\n  \"scripts\": {\r\n    \"deploy\": \"gatsby build --prefix-paths && gh-pages -d public\"\r\n  }\r\n}\r\n~~~\r\n\r\n이후 `npm run deploy` 명령어만으로 GitHub Pages 배포를 자동화할 수 있었다.\r\n\r\n---\r\n\r\n## 블로그 운영 Workflow\r\n\r\n안정적인 서비스 제공과 소스 코드 유실 방지를 위해 다음과 같은 운영 프로세스를 수립하였다.\r\n\r\n1. **Local Test**\r\n   `npm run start`로 로컬 환경에서 렌더링 결과 확인\r\n\r\n2. **Production Deploy**\r\n   `npm run deploy` 실행 후 `gh-pages` 브랜치에 정적 자산 배포\r\n\r\n3. **Source Backup**\r\n   원본 마크다운 및 설정 파일은 `main` 브랜치에 유지\r\n\r\n~~~bash\r\ngit push origin main\r\n~~~\r\n\r\n---\r\n\r\nNode.js v14는 현재 EOL 상태로 보안 업데이트가 지원되지 않는다.\r\n그러나 본 템플릿은 Gatsby v4 의존성이 강하게 결합되어 있어, 상위 Node.js 버전으로의 마이그레이션은 **코어 엔진 수정이 수반되는 작업**이다.\r\n\r\n따라서 당분간은 **런타임 격리 전략을 통해 안정성을 확보**하고, 향후에는 Gatsby v5 또는 Astro 기반으로의 마이그레이션을 검토할 예정이다.\r\n\r\n본 포스팅에서 정리한 설정을 통해 Gatsby v4 기반 블로그를 안정적으로 운영할 수 있는 기반 환경을 확보하였다."},{"excerpt":"정적 사이트 생성기(SSG) 기반의 블로그는 별도의 백엔드 데이터베이스가 존재하지 않아 동적인 댓글 기능을 구현하는 데 제약이 있다. 이를 해결하기 위해 기존에는 Utterances(Issues 기반)가 주로 사용되었으나, 권한 관리 및 스레드 구조의 한계가 존재하였다. 이에 대한 대안으로 GitHub Discussions API를 활용하는 Giscus를…","fields":{"slug":"/setup-giscus-comment-system/"},"frontmatter":{"date":"February 04, 2026","title":"블로그 댓글 시스템 Giscus 구축 및 연동","tags":["Gatsby","Giscus"]},"rawMarkdownBody":"\r\n정적 사이트 생성기(SSG) 기반의 블로그는 별도의 백엔드 데이터베이스가 존재하지 않아 동적인 댓글 기능을 구현하는 데 제약이 있다. 이를 해결하기 위해 기존에는 Utterances(Issues 기반)가 주로 사용되었으나, 권한 관리 및 스레드 구조의 한계가 존재하였다.\r\n\r\n이에 대한 대안으로 **GitHub Discussions API**를 활용하는 **Giscus**를 도입하기로 결정하였다. 본 포스팅에서는 Giscus 시스템의 동작 원리를 이해하고, Gatsby 프로젝트의 `blog-config.js`에 이를 연동하는 과정을 정리한다.\r\n\r\n---\r\n\r\n## GitHub Repository 설정 및 Discussions 활성화\r\n\r\nGiscus는 댓글 데이터를 GitHub 저장소의 Discussions 탭에 저장한다. 따라서 해당 기능이 비활성화되어 있다면 API가 정상적으로 동작하지 않는다.\r\n\r\n\r\n\r\n1.  **Repository Settings 접근:** 블로그 소스 코드가 호스팅된 저장소의 `Settings` 탭으로 이동한다.\r\n2.  **Features 설정:** `General` 메뉴 하단의 Features 섹션에서 **Discussions** 항목을 체크(Enable)한다.\r\n\r\n이 과정이 선행되지 않으면 Giscus 봇이 댓글 스레드를 생성할 수 없다.\r\n\r\n---\r\n\r\n## Giscus 애플리케이션 구성\r\n\r\nGiscus 앱과 저장소 간의 권한 위임 및 매핑 전략을 설정하기 위해 [Giscus.app](https://giscus.app/ko)에서 설정을 진행하였다.\r\n\r\n### 1. 저장소 연결 및 접근 권한\r\n\r\n저장소(Repository) 입력란에 `username/repository` 형식으로 대상 저장소를 지정한다. 이때 Giscus가 데이터를 읽고 쓸 수 있도록 해당 저장소는 반드시 **Public(공개)** 상태여야 한다.\r\n\r\n### 2. Page - Discussion 매핑 전략\r\n\r\n블로그 포스트와 댓글 스레드를 매핑하는 기준을 설정해야 한다. URL 경로가 변경되지 않는 한 가장 직관적인 매핑을 보장하는 **pathname** 방식을 선택하였다.\r\n\r\n* **pathname:** 포스트의 URL 경로(slug)를 기준으로 Discussion 제목을 생성한다.\r\n* **URL:** 전체 URL을 기준으로 한다. (프로토콜 변경 시 매핑이 깨질 위험 존재)\r\n* **Title:** `og:title` 태그를 기준으로 한다.\r\n\r\n### 3. Category 설정\r\n\r\nDiscussion이 생성될 카테고리를 지정한다. 일반적인 잡담과 구분하기 위해 `Announcements` 혹은 `General`을 선택한다. 댓글 기능의 안정성을 위해 '이 저장소에서 giscus가 discussion을 생성하고 수정하도록 허용합니다' 옵션을 활성화하여 봇의 권한을 위임하였다.\r\n\r\n---\r\n\r\n## 클라이언트 연동 및 Config 주입\r\n\r\n설정이 완료되면 Giscus 사이트 하단에 `<script>` 태그 형태의 코드가 생성된다. 여기서 핵심 식별자인 `repoId`와 `categoryId`를 추출하여 프로젝트 설정 파일에 주입해야 한다.\r\n\r\n\r\n\r\n### 환경 변수 및 메타 설정 적용\r\n\r\n본 프로젝트는 `blog-config.js`에서 전역 설정을 관리한다. 생성된 스크립트에서 `data-` 속성으로 명시된 값들을 추출하여 아래와 같이 적용하였다.\r\n\r\n**blog-config.js**\r\n\r\n~~~javascript\r\nmodule.exports = {\r\n  // ... existing config\r\n  giscus: {\r\n    repo: \"bh1848/hzeror\",\r\n    repoId: \"R_kgDOL...\", // data-repo-id 값 복사\r\n    category: \"Announcements\", // data-category 값 복사\r\n    categoryId: \"DIC_kwDOL...\", // data-category-id 값 복사\r\n    mapping: \"pathname\",\r\n    strict: \"0\",\r\n    reactionsEnabled: \"1\",\r\n    inputPosition: \"bottom\",\r\n    lang: \"ko\",\r\n  },\r\n}\r\n~~~\r\n\r\n위 설정을 적용하고 배포를 수행하면, 포스트 하단에 Giscus 위젯이 렌더링되며 GitHub 계정을 통한 댓글 작성이 가능해진다.\r\n\r\n---\r\n\r\nGiscus 도입을 통해 별도의 백엔드 구축 없이 **Serverless** 형태의 댓글 시스템을 확보하였다. 데이터의 소유권이 GitHub 저장소에 귀속되므로 데이터 마이그레이션이 용이하며, 개발자 친화적인 UI/UX를 제공한다는 점에서 기술 블로그에 최적화된 선택이라 판단한다."}]}},"pageContext":{}},"staticQueryHashes":[]}